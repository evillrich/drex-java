digraph InvoiceNFA {
    // Graph properties
    rankdir=LR;
    node [shape=circle, fontsize=12];
    edge [fontsize=10];

    // Define node styles
    S0 [style=filled, fillcolor=lightgreen, label="S0\nInitial"];
    S1 [style=filled, fillcolor=lightblue, label="S1\nGroupStart"];
    S2 [style=filled, fillcolor=plum, label="S2\nLine"];
    S3 [style=filled, fillcolor=plum, label="S3\nLine"];
    S4 [style=filled, fillcolor=lightcyan, label="S4\nAnyLine"];
    S5 [style=filled, fillcolor=plum, label="S5\nLine"];
    S6 [style=filled, fillcolor=orange, label="S6\nRepeatStart"];
    S7 [style=filled, fillcolor=plum, label="S7\nLine"];
    S8 [style=filled, fillcolor=orange, label="S8\nRepeatEnd"];
    S9 [style=filled, fillcolor=lightcyan, label="S9\nAnyLine"];
    S10 [style=filled, fillcolor=plum, label="S10\nLine"];
    S11 [style=filled, fillcolor=plum, label="S11\nLine"];
    S12 [style=filled, fillcolor=plum, label="S12\nLine"];
    S13 [style=filled, fillcolor=lightblue, label="S13\nGroupEnd"];
    S14 [style=filled, fillcolor=pink, label="S14\nFinal", shape=doublecircle];

    // Define transitions
    S0 -> S1 [label="ε", style=dashed];
    S1 -> S2 [label="ε\n(StartGroup)", style=dashed];
    S2 -> S3 [label="Invoice #(\\d+)"];
    S3 -> S4 [label="Date: (\\d{4}-\\d{2}-\\d{2})"];
    S4 -> S5 [label="*any*"];
    S5 -> S6 [label="Item\\tQuantity\\t..."];
    S6 -> S7 [label="ε\n(RepeatOne)", style=dashed];
    S7 -> S8 [label="([^\\t]+)\\t(\\d+)\\t..."];
    S8 -> S7 [label="ε\n(RepeatMore)", style=dashed];
    S8 -> S9 [label="ε\n(RepeatEnd)", style=dashed];
    S9 -> S10 [label="*any*"];
    S10 -> S11 [label="Subtotal: ([\\d\\.]+)"];
    S11 -> S12 [label="Tax: ([\\d\\.]+)"];
    S12 -> S13 [label="Total: ([\\d\\.]+)"];
    S13 -> S14 [label="ε\n(EndGroup)", style=dashed];
}